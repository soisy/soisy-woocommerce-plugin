!function(t,e,n){var a=n.template("table-rate-instalment-row-template"),o=t("#instalment_rates"),i=o.find("tbody.table_rates"),r={init:function(){o.on("click","a.add-rate",this.onAddRate).on("click","a.remove",this.onRemoveRate);var e=i.data("rates");t(e).each(function(t,e){i.append(a({period:e.period,amount:e.amount}))}),i.sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(e,n){return n.children().each(function(){t(this).width(t(this).width())}),n.css("left","0"),n},start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),r.reindexRows()}}),t("#woocommerce_table_rate_calculation_type").change()},onAddRate:function(e){e.preventDefault(),i.append(a({period:"",amount:""})),t("#woocommerce_table_rate_calculation_type",o).change()},onRemoveRate:function(n){if(n.preventDefault(),confirm(e.i18n.delete_rates)){var a=[];i.find("tr td.check-column input:checked").each(function(e,n){var o=t(n).closest("tr.table_rate").find(".rate_id").val();a.push(o),t(n).closest("tr.table_rate").addClass("deleting")}),t("tr.deleting").fadeOut("300",function(){t(this).remove()})}},reindexRows:function(){var e=0;i.find("tr").each(function(n,a){t("input.text, input.checkbox, select.select",a).each(function(n,a){var o=t(a);o.attr("name",o.attr("name").replace(/\[([^[]*)\]/,"["+e+"]"))}),e++})}};r.init()}(jQuery,woocommerce_instalment_table_rate_rows,wp);